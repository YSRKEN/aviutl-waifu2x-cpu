#aviutl-waifu2x-cpu
waifu2xの処理を行うことが可能な、AviUtlのフィルタプラグインです。

##インストール
plugins以下をDLしてAviUtlのフォルダに突っ込んでください。
このプラグインはaviutl.exeと同フォルダだと動作しませんし、
modelsフォルダは当該aufファイルと同じフォルダにある必要があります。

##使用方法
設定画面はnoiseトラックバーとscaleトラックバーだけのシンプルなものです。
それぞれデノイズレベル0〜2、拡大レベル0〜1(0だと拡大しない)です。
両方0だと何もしませんが、それ以外ならデノイズか拡大か両方を行います。
なお、設定画面のタイトルバーに演算時間がミリ秒単位で表示されます。

##コンパイル
Microsoft Visual Studio 2013でコンパイルしました。
AviUtlなので32bitバイナリを作成してください。

##モデルデータについて
toolフォルダ内にjsoncnv.exeがありますが、これで元々のJSONデータを変換しています。
JSONデータの解釈には[picojson.h](https://github.com/kazuho/picojson)を使用しました。
そうして出来たモデルデータ(バイナリ)のフォーマットは次の通りです。
 * ステップ数(int)
 * 入力平面数(int)と出力平面数(int)のセットをステップ数回繰り返す
 * 重みデータ(double)を出力平面数×入力平面数×3×3回繰り返すことをステップ数回繰り返す
 * バイアス(double)を出力平面数回繰り返すことをステップ数回繰り返す
変換する際は、コマンドライン引数を次のように設定します。
「jsoncnv {変換したいjsonファイル} {出力後のdatファイル}」
なお、jsoncnv.exeのソースコードはjsoncnv.cppです。

##その他
sampleフォルダにはサンプル画像を置いてあります。
Core i5-3210Mで100x100の画像をnoiseすると10秒・scaleで40秒・noise_scaleで50秒程度
掛かりますが、将来的にはSIMD・並列処理を取り入れて高速化予定です。
